<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–°–±—Ä–æ—Å GPS - –ó–µ–º–ª–µ–º–µ—Ä</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: Arial, sans-serif; padding: 20px; background: #f0f0f0; }
        .container { max-width: 400px; margin: 0 auto; }
        .header { text-align: center; margin-bottom: 20px; }
        .card { background: white; padding: 20px; margin: 15px 0; border-radius: 10px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); }
        .btn { width: 100%; padding: 15px; margin: 10px 0; border: none; border-radius: 8px; font-size: 16px; font-weight: bold; cursor: pointer; }
        .btn-danger { background: #ef4444; color: white; }
        .btn-warning { background: #f59e0b; color: white; }
        .btn-success { background: #10b981; color: white; }
        .btn-primary { background: #2563eb; color: white; }
        .status { padding: 10px; margin: 10px 0; border-radius: 5px; font-size: 14px; }
        .status-success { background: #d1fae5; color: #065f46; }
        .status-error { background: #fee2e2; color: #991b1b; }
        .status-warning { background: #fef3c7; color: #92400e; }
        .step { margin: 10px 0; padding: 15px; background: #f8f9fa; border-radius: 8px; border-left: 4px solid #3b82f6; }
        .step-title { font-weight: bold; color: #1f2937; margin-bottom: 8px; }
        .step-desc { font-size: 14px; color: #6b7280; line-height: 1.4; }
        .coords { font-family: monospace; font-size: 12px; background: #f3f4f6; padding: 10px; border-radius: 5px; }
        .warning { background: #fef2f2; border: 1px solid #fecaca; padding: 15px; border-radius: 8px; color: #991b1b; }
        .success { background: #f0fdf4; border: 1px solid #bbf7d0; padding: 15px; border-radius: 8px; color: #166534; }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h2>üîÑ –°–±—Ä–æ—Å GPS –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏</h2>
            <p>–†–∞–¥–∏–∫–∞–ª—å–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã</p>
        </div>

        <div class="warning">
            <strong>‚ö†Ô∏è –í–ù–ò–ú–ê–ù–ò–ï:</strong> GPS –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω –Ω–∞–≤—Å–µ–≥–¥–∞ –¥–ª—è —ç—Ç–æ–≥–æ —Å–∞–π—Ç–∞. –ù—É–∂–µ–Ω –ø–æ–ª–Ω—ã–π —Å–±—Ä–æ—Å –Ω–∞—Å—Ç—Ä–æ–µ–∫.
        </div>

        <!-- –ú–µ—Ç–æ–¥ 1: –ù–æ–≤—ã–π –¥–æ–º–µ–Ω -->
        <div class="card">
            <h3>üåê –ú–µ—Ç–æ–¥ 1: –ù–æ–≤—ã–π –¥–æ–º–µ–Ω</h3>
            <p>–û—Ç–∫—Ä–æ–π—Ç–µ —Ñ–∞–π–ª —Å –¥—Ä—É–≥–æ–≥–æ –∞–¥—Ä–µ—Å–∞:</p>
            <button id="openNewDomain" class="btn btn-primary">üì± –û—Ç–∫—Ä—ã—Ç—å —á–µ—Ä–µ–∑ IP</button>
            <div id="newDomainResult" class="status status-warning">
                –°–∫–æ–ø–∏—Ä—É–π—Ç–µ —Ñ–∞–π–ª –Ω–∞ –≤–µ–±-—Å–µ—Ä–≤–µ—Ä –∏–ª–∏ –æ—Ç–∫—Ä–æ–π—Ç–µ —á–µ—Ä–µ–∑ –¥—Ä—É–≥–æ–π –ø—É—Ç—å
            </div>
        </div>

        <!-- –ú–µ—Ç–æ–¥ 2: –°–±—Ä–æ—Å –±—Ä–∞—É–∑–µ—Ä–∞ -->
        <div class="card">
            <h3>üîß –ú–µ—Ç–æ–¥ 2: –°–±—Ä–æ—Å –±—Ä–∞—É–∑–µ—Ä–∞</h3>
            <div class="step">
                <div class="step-title">1. –û—á–∏—Å—Ç–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –±—Ä–∞—É–∑–µ—Ä–∞</div>
                <div class="step-desc">–ù–∞—Å—Ç—Ä–æ–π–∫–∏ ‚Üí –ö–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ—Å—Ç—å ‚Üí –û—á–∏—Å—Ç–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –±—Ä–∞—É–∑–µ—Ä–∞ ‚Üí –í—Å—ë –≤—Ä–µ–º—è</div>
            </div>
            <div class="step">
                <div class="step-title">2. –°–±—Ä–æ—Å–∏—Ç—å —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è</div>
                <div class="step-desc">–ù–∞—Å—Ç—Ä–æ–π–∫–∏ ‚Üí –°–∞–π—Ç—ã ‚Üí –†–∞–∑—Ä–µ—à–µ–Ω–∏—è ‚Üí –°–±—Ä–æ—Å–∏—Ç—å –≤—Å–µ</div>
            </div>
            <button id="helpReset" class="btn btn-danger">‚ùå –ü–æ–º–æ—á—å —Å–æ —Å–±—Ä–æ—Å–æ–º</button>
        </div>

        <!-- –ú–µ—Ç–æ–¥ 3: –î—Ä—É–≥–æ–π –±—Ä–∞—É–∑–µ—Ä -->
        <div class="card">
            <h3>üåç –ú–µ—Ç–æ–¥ 3: –î—Ä—É–≥–æ–π –±—Ä–∞—É–∑–µ—Ä</h3>
            <p>–ü–æ–ø—Ä–æ–±—É–π—Ç–µ –≤ –¥—Ä—É–≥–æ–º –±—Ä–∞—É–∑–µ—Ä–µ:</p>
            <button id="tryFirefox" class="btn btn-warning">ü¶ä –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –¥–ª—è Firefox</button>
            <button id="tryEdge" class="btn btn-primary">üåü –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –¥–ª—è Edge</button>
            <div id="browserInstructions"></div>
        </div>

        <!-- –ú–µ—Ç–æ–¥ 4: –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ Android -->
        <div class="card">
            <h3>üì± –ú–µ—Ç–æ–¥ 4: –ù–∞—Ç–∏–≤–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ</h3>
            <p>–°–æ–∑–¥–∞—Ç—å APK —Ñ–∞–π–ª —Å –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–º–∏ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è–º–∏:</p>
            <button id="createApk" class="btn btn-success">üì¶ –°–æ–∑–¥–∞—Ç—å APK</button>
            <div id="apkStatus"></div>
        </div>

        <!-- –¢–µ—Å—Ç GPS -->
        <div class="card">
            <h3>üß™ –¢–µ—Å—Ç GPS</h3>
            <div id="gpsStatus" class="status status-warning">–ì–æ—Ç–æ–≤ –∫ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é</div>
            <div id="coords" class="coords"></div>
            <button id="testGps" class="btn btn-primary">üéØ –¢–µ—Å—Ç GPS</button>
            <button id="mockGps" class="btn btn-success">üé≤ –ò–º–∏—Ç–∞—Ü–∏—è GPS</button>
        </div>

        <!-- –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ -->
        <div class="card">
            <h3>üìã –ü–æ—à–∞–≥–æ–≤—ã–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏</h3>
            <div id="instructions">
                <div class="step">
                    <div class="step-title">–î–ª—è Chrome:</div>
                    <div class="step-desc">
                        1. –ú–µ–Ω—é (‚ãÆ) ‚Üí –ù–∞—Å—Ç—Ä–æ–π–∫–∏<br>
                        2. –ö–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ—Å—Ç—å ‚Üí –û—á–∏—Å—Ç–∏—Ç—å –¥–∞–Ω–Ω—ã–µ<br>
                        3. –í—ã–±—Ä–∞—Ç—å "–í—Å—ë –≤—Ä–µ–º—è" ‚Üí –û—á–∏—Å—Ç–∏—Ç—å<br>
                        4. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å –±—Ä–∞—É–∑–µ—Ä
                    </div>
                </div>
                <div class="step">
                    <div class="step-title">–î–ª—è Samsung Internet:</div>
                    <div class="step-desc">
                        1. –ú–µ–Ω—é ‚Üí –ù–∞—Å—Ç—Ä–æ–π–∫–∏<br>
                        2. –ö–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ—Å—Ç—å ‚Üí –£–¥–∞–ª–∏—Ç—å –¥–∞–Ω–Ω—ã–µ<br>
                        3. –í—ã–±—Ä–∞—Ç—å –≤—Å—ë ‚Üí –£–¥–∞–ª–∏—Ç—å<br>
                        4. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        let currentLocation = null;

        // –≠–ª–µ–º–µ–Ω—Ç—ã
        const gpsStatus = document.getElementById('gpsStatus');
        const coords = document.getElementById('coords');
        const newDomainResult = document.getElementById('newDomainResult');
        const browserInstructions = document.getElementById('browserInstructions');
        const apkStatus = document.getElementById('apkStatus');

        // –ü–æ–∫–∞–∑–∞—Ç—å —Å—Ç–∞—Ç—É—Å
        function showStatus(text, type, element = gpsStatus) {
            element.className = `status status-${type}`;
            element.textContent = text;
        }

        // –¢–µ—Å—Ç GPS
        function testGPS() {
            if (!navigator.geolocation) {
                showStatus('‚ùå GPS –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è', 'error');
                return;
            }

            showStatus('üîç –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ GPS...', 'warning');

            navigator.geolocation.getCurrentPosition(
                (position) => {
                    const { latitude, longitude, accuracy } = position.coords;
                    currentLocation = { lat: latitude, lng: longitude };
                    
                    coords.innerHTML = `
                        ‚úÖ GPS –†–ê–ë–û–¢–ê–ï–¢!<br>
                        –®–∏—Ä–æ—Ç–∞: ${latitude.toFixed(6)}<br>
                        –î–æ–ª–≥–æ—Ç–∞: ${longitude.toFixed(6)}<br>
                        –¢–æ—á–Ω–æ—Å—Ç—å: ¬±${accuracy.toFixed(0)}–º
                    `;
                    
                    showStatus('‚úÖ GPS —É—Å–ø–µ—à–Ω–æ —Ä–∞–±–æ—Ç–∞–µ—Ç!', 'success');
                    
                    // –ü–æ–∫–∞–∑–∞—Ç—å —É—Å–ø–µ—Ö
                    document.querySelector('.warning').innerHTML = `
                        <div class="success">
                            <strong>üéâ –£–°–ü–ï–•!</strong> GPS —Ç–µ–ø–µ—Ä—å —Ä–∞–±–æ—Ç–∞–µ—Ç! –ü—Ä–æ–±–ª–µ–º–∞ —Ä–µ—à–µ–Ω–∞.
                        </div>
                    `;
                },
                (error) => {
                    let message = '–û—à–∏–±–∫–∞ GPS';
                    switch(error.code) {
                        case error.PERMISSION_DENIED:
                            message = '‚ùå –†–∞–∑—Ä–µ—à–µ–Ω–∏–µ –ø–æ-–ø—Ä–µ–∂–Ω–µ–º—É –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–æ';
                            break;
                        case error.POSITION_UNAVAILABLE:
                            message = '‚ö†Ô∏è GPS –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω';
                            break;
                        case error.TIMEOUT:
                            message = '‚è±Ô∏è –í—Ä–µ–º—è –æ–∂–∏–¥–∞–Ω–∏—è –∏—Å—Ç–µ–∫–ª–æ';
                            break;
                    }
                    
                    showStatus(message, 'error');
                    coords.innerHTML = `–û—à–∏–±–∫–∞: ${error.message}`;
                },
                {
                    enableHighAccuracy: true,
                    timeout: 10000,
                    maximumAge: 0
                }
            );
        }

        // –ò–º–∏—Ç–∞—Ü–∏—è GPS
        function mockGPS() {
            const testCoords = [
                { name: '–ú–æ—Å–∫–≤–∞', lat: 55.7558, lng: 37.6176 },
                { name: '–°–∞–Ω–∫—Ç-–ü–µ—Ç–µ—Ä–±—É—Ä–≥', lat: 59.9311, lng: 30.3609 },
                { name: '–ù–æ–≤–æ—Å–∏–±–∏—Ä—Å–∫', lat: 55.0084, lng: 82.9357 }
            ];
            
            const randomCoord = testCoords[Math.floor(Math.random() * testCoords.length)];
            currentLocation = randomCoord;
            
            coords.innerHTML = `
                üé≤ –¢–ï–°–¢–û–í–´–ï –ö–û–û–†–î–ò–ù–ê–¢–´<br>
                –ú–µ—Å—Ç–æ: ${randomCoord.name}<br>
                –®–∏—Ä–æ—Ç–∞: ${randomCoord.lat.toFixed(6)}<br>
                –î–æ–ª–≥–æ—Ç–∞: ${randomCoord.lng.toFixed(6)}<br>
                –¢–æ—á–Ω–æ—Å—Ç—å: ¬±5–º (–∏–º–∏—Ç–∞—Ü–∏—è)
            `;
            
            showStatus('üéØ –¢–µ—Å—Ç–æ–≤—ã–µ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã', 'success');
        }

        // –ù–æ–≤—ã–π –¥–æ–º–µ–Ω
        function openNewDomain() {
            const currentUrl = window.location.href;
            const newUrl = currentUrl.replace('file://', 'http://localhost:3000/');
            
            newDomainResult.innerHTML = `
                <div class="step">
                    <div class="step-title">–ü–æ–ø—Ä–æ–±—É–π—Ç–µ –æ—Ç–∫—Ä—ã—Ç—å:</div>
                    <div class="step-desc">
                        1. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –ª–æ–∫–∞–ª—å–Ω—ã–π —Å–µ—Ä–≤–µ—Ä<br>
                        2. –û—Ç–∫—Ä–æ–π—Ç–µ: http://localhost:3000/reset-gps.html<br>
                        3. –ò–ª–∏ —Å–∫–æ–ø–∏—Ä—É–π—Ç–µ —Ñ–∞–π–ª –Ω–∞ –¥—Ä—É–≥–æ–π —Å–µ—Ä–≤–µ—Ä
                    </div>
                </div>
            `;
            
            showStatus('üì± –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ–∫–∞–∑–∞–Ω–∞ –Ω–∏–∂–µ', 'success', newDomainResult);
        }

        // –ü–æ–º–æ—â—å —Å–æ —Å–±—Ä–æ—Å–æ–º
        function helpReset() {
            if (confirm('–û—Ç–∫—Ä—ã—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –±—Ä–∞—É–∑–µ—Ä–∞ –¥–ª—è —Å–±—Ä–æ—Å–∞?')) {
                // –ü–æ–ø—ã—Ç–∫–∞ –æ—Ç–∫—Ä—ã—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
                try {
                    window.open('chrome://settings/clearBrowserData', '_blank');
                } catch (e) {
                    alert('–û—Ç–∫—Ä–æ–π—Ç–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –±—Ä–∞—É–∑–µ—Ä–∞ –≤—Ä—É—á–Ω—É—é:\n–ú–µ–Ω—é ‚Üí –ù–∞—Å—Ç—Ä–æ–π–∫–∏ ‚Üí –ö–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ—Å—Ç—å ‚Üí –û—á–∏—Å—Ç–∏—Ç—å –¥–∞–Ω–Ω—ã–µ');
                }
            }
        }

        // –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –¥–ª—è Firefox
        function tryFirefox() {
            browserInstructions.innerHTML = `
                <div class="step">
                    <div class="step-title">Firefox Mobile:</div>
                    <div class="step-desc">
                        1. –ú–µ–Ω—é ‚Üí –ù–∞—Å—Ç—Ä–æ–π–∫–∏<br>
                        2. –£–¥–∞–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –æ –ø—Ä–æ—Å–º–æ—Ç—Ä–∞—Ö<br>
                        3. –û—Ç–º–µ—Ç–∏—Ç—å "–†–∞–∑—Ä–µ—à–µ–Ω–∏—è —Å–∞–π—Ç–æ–≤"<br>
                        4. –ù–∞–∂–∞—Ç—å "–£–¥–∞–ª–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –æ –ø—Ä–æ—Å–º–æ—Ç—Ä–∞—Ö"<br>
                        5. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å Firefox
                    </div>
                </div>
            `;
        }

        // –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –¥–ª—è Edge
        function tryEdge() {
            browserInstructions.innerHTML = `
                <div class="step">
                    <div class="step-title">Microsoft Edge:</div>
                    <div class="step-desc">
                        1. –ú–µ–Ω—é (‚ãØ) ‚Üí –ù–∞—Å—Ç—Ä–æ–π–∫–∏<br>
                        2. –ö–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ—Å—Ç—å –∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å<br>
                        3. –û—á–∏—Å—Ç–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –±—Ä–∞—É–∑–µ—Ä–∞<br>
                        4. –í—ã–±—Ä–∞—Ç—å "–†–∞–∑—Ä–µ—à–µ–Ω–∏—è" –∏ "–í—Å—ë –≤—Ä–µ–º—è"<br>
                        5. –û—á–∏—Å—Ç–∏—Ç—å —Å–µ–π—á–∞—Å
                    </div>
                </div>
            `;
        }

        // –°–æ–∑–¥–∞—Ç—å APK
        function createApk() {
            apkStatus.innerHTML = `
                <div class="step">
                    <div class="step-title">–°–æ–∑–¥–∞–Ω–∏–µ APK –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è:</div>
                    <div class="step-desc">
                        1. –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –±—É–¥–µ—Ç –∏–º–µ—Ç—å –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–µ GPS —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è<br>
                        2. –ù–µ –∑–∞–≤–∏—Å–∏—Ç –æ—Ç –±—Ä–∞—É–∑–µ—Ä–∞<br>
                        3. –¢—Ä–µ–±—É–µ—Ç Android Studio –¥–ª—è —Å–±–æ—Ä–∫–∏<br>
                        4. –ò–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ Capacitor Cloud Build
                    </div>
                </div>
                <div class="status status-warning">
                    üì¶ APK —Å–æ–∑–¥–∞–Ω–∏–µ —Ç—Ä–µ–±—É–µ—Ç —É—Å—Ç–∞–Ω–æ–≤–∫–∏ Android Studio
                </div>
            `;
        }

        // –°–æ–±—ã—Ç–∏—è
        document.getElementById('testGps').addEventListener('click', testGPS);
        document.getElementById('mockGps').addEventListener('click', mockGPS);
        document.getElementById('openNewDomain').addEventListener('click', openNewDomain);
        document.getElementById('helpReset').addEventListener('click', helpReset);
        document.getElementById('tryFirefox').addEventListener('click', tryFirefox);
        document.getElementById('tryEdge').addEventListener('click', tryEdge);
        document.getElementById('createApk').addEventListener('click', createApk);

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
        window.addEventListener('load', () => {
            showStatus('üîÑ –ì–æ—Ç–æ–≤ –∫ —Å–±—Ä–æ—Å—É GPS –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏', 'warning');
        });
    </script>
</body>
</html>
